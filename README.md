# SAURELLIUS

<div align="center">

![Saurellius](https://img.shields.io/badge/SAURELLIUS-1473FF?style=for-the-badge&logo=cloud&logoColor=white)
![Version](https://img.shields.io/badge/v2.0.0-success?style=for-the-badge)
![Platform](https://img.shields.io/badge/iOS%20%7C%20Android%20%7C%20Web-333333?style=for-the-badge)
![Countries](https://img.shields.io/badge/US%20%7C%20Canada-blue?style=for-the-badge)

### Enterprise Payroll Management Platform

**The complete cloud-based solution for payroll processing, tax compliance, workforce management, and employee lifecycle administration.**

[Platform Overview](#platform-overview) • [Core Modules](#core-modules) • [Tax Engine API](#saurellius-tax-engine-api) • [Architecture](#architecture) • [Getting Started](#getting-started)

---

</div>

## Platform Overview

Saurellius is a comprehensive **enterprise payroll management platform** designed for businesses of all sizes. From startup to enterprise, Saurellius handles the complete employee lifecycle—from onboarding and I-9 verification through payroll processing, tax compliance, benefits administration, and termination with COBRA management.

### What Sets Saurellius Apart

| Capability | Description |
|------------|-------------|
| **End-to-End Payroll** | Complete gross-to-net processing with federal, state, and local tax calculations |
| **US + Canada Support** | Full tax compliance for 50 US states + 7,400 localities + 13 Canadian provinces |
| **Open Tax Engine API** | Enterprise-grade API for partners with 3ms response times |
| **Real-Time Compliance** | Automated tax rate updates, filing deadlines, and regulatory alerts |
| **Employee Lifecycle** | Onboarding → Payroll → Benefits → Termination → COBRA |
| **Workforce Management** | Time clock, scheduling, shift swaps, and attendance tracking |
| **AI-Powered Assistance** | Google Gemini integration for payroll guidance and compliance |

---

## Core Modules

###  Payroll Processing Engine

Complete payroll calculation and processing system.

| Feature | Description |
|---------|-------------|
| **Gross-to-Net Calculation** | Federal, state, local tax withholding with YTD tracking |
| **Multi-State Payroll** | Reciprocity agreements, work-state vs residence-state handling |
| **Pay Frequencies** | Weekly, bi-weekly, semi-monthly, monthly support |
| **Direct Deposit (ACH)** | Bank account management, split deposits, NACHA file generation |
| **Payroll Corrections** | Overpayment recovery, underpayment catch-up, retroactive adjustments |
| **Batch Processing** | Process thousands of employees in single payroll runs |
| **Payroll Reports** | Register, tax liability, journal entries, check register |

###  Tax Compliance

Comprehensive tax calculation and filing support.

| Feature | Description |
|---------|-------------|
| **Federal Taxes** | FIT (7 brackets), Social Security ($176,100 cap), Medicare, Additional Medicare |
| **State Income Tax** | All 50 states + DC with progressive and flat rate support |
| **Local Taxes** | 7,400+ jurisdictions—cities, counties, school districts, transit |
| **SDI/PFML** | State disability and paid family leave for 12+ states |
| **Unemployment** | FUTA, SUTA with experience rating by state |
| **Canadian Payroll** | Federal, provincial, CPP/QPP, EI, QPIP |
| **W-4 Processing** | 2020+ W-4 support with all 5 steps |
| **Year-End Filing** | W-2, W-3, 1099, 940, 941, 944 preparation |

###  Employee Management

Complete employee lifecycle administration.

| Feature | Description |
|---------|-------------|
| **Onboarding** | Configurable workflows, task tracking, document collection |
| **I-9 Verification** | Section 1 & 2, document verification, E-Verify integration |
| **W-4 Management** | Electronic submission, state forms, withholding calculator |
| **Direct Deposit Setup** | Bank account verification, prenote, split deposits |
| **Employee Profiles** | Demographics, compensation, tax info, emergency contacts |
| **Termination Processing** | Final pay calculation, state-specific rules, exit workflows |
| **COBRA Administration** | Qualifying events, notices, elections, premium tracking |

### ⏰ Time & Attendance

Complete workforce time tracking system.

| Feature | Description |
|---------|-------------|
| **Time Clock** | Punch in/out with real-time tracking |
| **Break Management** | Meal and rest break compliance (California rules) |
| **Overtime Calculation** | Federal 40-hour, California daily OT, 7th day rules |
| **Timesheet Approval** | Manager review and approval workflows |
| **GPS Location** | Geofenced clock events for field workers |
| **Meal Break Violations** | Automatic detection and premium calculation |

###  Workforce Scheduling

Employee scheduling and shift management.

| Feature | Description |
|---------|-------------|
| **Schedule Builder** | Weekly grid view, drag-and-drop interface |
| **Position Coding** | Color-coded roles for visual clarity |
| **Overtime Alerts** | Warnings for 40+ hour weeks |
| **Publish & Notify** | Push schedules to employee devices |
| **SWIPE System** | Employee shift swap requests with manager approval |
| **Availability** | Employee availability preferences |

### Benefits Administration

Complete benefits and insurance management.

| Feature | Description |
|---------|-------------|
| **Medical Plans** | PPO, HMO, HDHP with cost comparison |
| **Dental & Vision** | Preventive, basic, major coverage tiers |
| **Life & Disability** | Basic, supplemental, AD&D, STD, LTD |
| **Retirement** | 401(k) with employer matching, Roth option |
| **FSA/HSA** | Healthcare and dependent care accounts |
| **Benefits Taxability** | Pre-tax vs post-tax deduction handling |
| **COBRA Management** | 60-day elections, 102% premiums, grace periods |

###  Garnishment Management

Wage garnishment processing with legal compliance.

| Feature | Description |
|---------|-------------|
| **Garnishment Types** | Child support, tax levies, student loans, creditor, bankruptcy |
| **Priority Order** | Automatic calculation per federal/state law |
| **Disposable Income** | CCPA limits and multi-garnishment handling |
| **Payment Tracking** | Balance tracking and payment history |
| **Court Orders** | Document storage and compliance tracking |

###  Reporting & Analytics

Comprehensive payroll and HR reporting.

| Feature | Description |
|---------|-------------|
| **Payroll Register** | Detailed pay period breakdown |
| **Tax Liability** | Federal, state, local tax summaries |
| **Labor Distribution** | Department and cost center allocation |
| **Quarterly Reports** | 941, state unemployment filings |
| **Audit Trail** | Complete change history for compliance |
| **Custom Reports** | Configurable report builder |

###  Audit & Compliance

Complete audit trail and approval workflows.

| Feature | Description |
|---------|-------------|
| **Change Logging** | Before/after values for all modifications |
| **Approval Workflows** | Multi-level approval for sensitive changes |
| **Compliance Reports** | SOC 2 ready audit exports |
| **Security Events** | Login tracking, failed attempts, IP logging |
| **Document Retention** | Configurable retention policies |

###  Communications Hub

Internal messaging and recognition system.

| Feature | Description |
|---------|-------------|
| **Direct Messages** | 1:1 secure employee chat |
| **Channels** | Team, department, project groups |
| **Announcements** | Company-wide broadcasts with priority |
| **Recognition** | Kudos badges with point values |
| **Notifications** | Real-time alerts with read receipts |

### Saurellius AI

Comprehensive AI-powered assistance powered by Google Gemini, embedded throughout the entire platform.

#### Core AI Features

| Feature | Description |
|---------|-------------|
| **Contextual Chat** | Full platform-aware AI assistant with access to all your data |
| **Natural Language Queries** | Ask questions about payroll data in plain English |
| **Compliance Checker** | Verify payroll against state-specific regulations |
| **Tax Guidance** | Explain withholding calculations and optimization |
| **Document Analysis** | AI-powered extraction from W-4, I-9, and other forms |

#### Wallet Intelligence

| Feature | Description |
|---------|-------------|
| **Transaction Analysis** | Real-time fraud detection on wallet transactions |
| **Spending Insights** | AI-generated insights on wallet usage patterns |
| **EWA Risk Assessment** | Evaluate Earned Wage Access requests for risk |
| **Funding Recommendations** | Smart suggestions for wallet funding amounts |

#### Scheduling Intelligence

| Feature | Description |
|---------|-------------|
| **Schedule Optimization** | AI recommendations to improve scheduling efficiency |
| **Demand Forecasting** | Predict future staffing needs based on patterns |
| **Shift Swap Analysis** | Evaluate swap requests for coverage and overtime impact |
| **Overtime Alerts** | Proactive warnings for employees approaching 40 hours |

#### Payroll Intelligence

| Feature | Description |
|---------|-------------|
| **Pre-Run Analysis** | Comprehensive validation before processing payroll |
| **Anomaly Detection** | Identify unusual patterns in paystub data |
| **Cost Optimization** | Suggestions to reduce payroll processing costs |
| **Paystub Validation** | AI verification of tax calculations and deductions |

#### Smart Notifications

| Feature | Description |
|---------|-------------|
| **Priority Alerts** | AI-generated alerts based on platform-wide data |
| **Personalized Delivery** | Optimize notification timing based on user behavior |
| **Actionable Insights** | Each alert includes recommended next steps |

###  Digital Wallet

Complete digital wallet system for instant payroll.

#### Employer Wallet

| Feature | Description |
|---------|-------------|
| **Fund Wallet** | Add funds via bank (free) or card (2.9% fee) |
| **Payroll Reserve** | Set aside funds for upcoming payroll |
| **Instant Pay** | Pay employees instantly from wallet balance |
| **Batch Payments** | Process multiple employee payments at once |
| **Bank Withdrawal** | Transfer to bank (instant $1.50 or free 1-3 days) |
| **Transaction History** | Complete audit trail of all wallet activity |

#### Employee Wallet

| Feature | Description |
|---------|-------------|
| **Receive Wages** | Get paid instantly into digital wallet |
| **Earned Wage Access** | Get up to 50% of earned wages before payday (1% fee) |
| **Instant Transfer** | Move money to bank in minutes ($1.50) |
| **Standard Transfer** | Free bank transfer in 1-3 business days |
| **Balance Tracking** | View available balance and YTD wages |
| **Transaction History** | Complete record of all transactions |

#### Fees

| Service | Fee |
|---------|-----|
| Fund wallet (bank/ACH) | Free |
| Fund wallet (card) | 2.9% |
| Standard bank transfer | Free |
| Instant bank transfer | $1.50 |
| Earned Wage Access | 1% |

---

## Saurellius Tax Engine API

### Enterprise Open API for Partners

The Saurellius Tax Engine is a production-ready, enterprise-grade payroll tax calculation API available to partners and third-party integrations.

### Supported Countries

| Country | Jurisdictions | Tax Types |
|---------|---------------|-----------|
| **United States** | 50 states + DC + 7,400 local | FIT, SIT, FICA, MEDI, FUTA, SUTA, SDI, PFML, LIT |
| **Canada** | 13 provinces/territories | FIT, PIT, CPP, CPP2, EI, QPP, QPIP, EHT |

### API Capabilities

| Endpoint Category | Description |
|-------------------|-------------|
| **Geocoding** | Convert addresses to tax jurisdiction codes |
| **Tax Discovery** | Find all applicable taxes for a location |
| **Gross-to-Net** | Calculate complete payroll tax withholding |
| **Gross-Up** | Calculate gross pay from target net pay |
| **Batch Processing** | Process up to 10,000 employees per request |
| **Benefits Taxability** | Determine pre-tax vs post-tax treatment |
| **Rate Lookup** | Retrieve current tax rates and brackets |

### API Pricing

| Tier | Annual Price | Daily Limit | Overage Rate | Features |
|------|--------------|-------------|--------------|----------|
| **Standard** | $2,000 | 5,000 | $0.50/request | Geocode, Calculate, Rates |
| **Professional** | $5,000 | 20,000 | $0.25/request | + Batch (100), Multi-state, Gross-up |
| **Enterprise** | $10,000 | 100,000 | $0.10/request | + Local taxes, Webhooks, Canada, Batch (1,000) |
| **Ultimate** | $15,000 | Unlimited | N/A | Full access, Batch (10,000), White-label, SLA |

### Sample Request

```bash
curl -X POST https://api.saurellius.com/api/v2/tax/calculate/gross-to-net \
  -H "X-API-Key: your_api_key" \
  -H "Content-Type: application/json" \
  -d '{
    "employee_id": "EMP-001",
    "payroll_run": {"pay_date": "2025-01-15", "pay_periods_per_year": 26},
    "wages": [{"location_code": "00-000-0000", "gross_wages": 2500}],
    "tax_parameters": [
      {"unique_tax_id": "00-000-0000-FIT-000", "parameters": {"filing_status": "S"}}
    ]
  }'
```

---

## Architecture

### Technology Stack

| Layer | Technology | Purpose |
|-------|------------|---------|
| **Frontend** | React Native + Expo | Cross-platform mobile & web |
| **Backend** | Python + Flask | REST API server |
| **Database** | PostgreSQL | Primary data store |
| **AI** | Google Gemini Pro | Natural language processing |
| **Payments** | Stripe | Subscription billing |
| **Email** | Resend | Transactional emails |
| **PDF** | Playwright + Chromium | Document rendering |
| **Auth** | JWT + bcrypt | Secure authentication |

### System Architecture

```
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                                    CLIENT APPLICATIONS                                   │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                          │
│      ┌─────────────┐         ┌─────────────┐         ┌─────────────┐                    │
│      │   iOS App   │         │ Android App │         │   Web App   │                    │
│      │React Native │         │React Native │         │    React    │                    │
│      └──────┬──────┘         └──────┬──────┘         └──────┬──────┘                    │
│             └───────────────────────┼───────────────────────┘                            │
│                                     ▼                                                    │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                              FLASK REST API (Port 5001)                                  │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                          │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐    │
│  │                              PAYROLL PROCESSING                                  │    │
│  ├─────────────┬─────────────┬─────────────┬─────────────┬─────────────────────────┤    │
│  │  Payroll    │    ACH /    │   Payroll   │   Year-End  │    Garnishment          │    │
│  │    Run      │Direct Deposit│ Corrections │  Processing │    Management           │    │
│  └─────────────┴─────────────┴─────────────┴─────────────┴─────────────────────────┘    │
│                                                                                          │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐    │
│  │                              TAX COMPLIANCE                                      │    │
│  ├─────────────┬─────────────┬─────────────┬─────────────┬─────────────────────────┤    │
│  │ Tax Engine  │  Tax Engine │    W-4      │   State     │       Tax               │    │
│  │    V1       │     V2      │  Processing │   Rules     │      Filing             │    │
│  └─────────────┴─────────────┴─────────────┴─────────────┴─────────────────────────┘    │
│                                                                                          │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐    │
│  │                           EMPLOYEE LIFECYCLE                                     │    │
│  ├─────────────┬─────────────┬─────────────┬─────────────┬─────────────────────────┤    │
│  │ Onboarding  │     I-9     │  Benefits   │ Termination │       COBRA             │    │
│  │  Workflows  │ Verification│    Admin    │  Processing │   Administration        │    │
│  └─────────────┴─────────────┴─────────────┴─────────────┴─────────────────────────┘    │
│                                                                                          │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐    │
│  │                           WORKFORCE MANAGEMENT                                   │    │
│  ├─────────────┬─────────────┬─────────────┬─────────────┬─────────────────────────┤    │
│  │  Time Clock │  Timesheet  │  Workforce  │    SWIPE    │        PTO              │    │
│  │ Attendance  │   Approval  │  Scheduling │  Shift Swap │      Tracking           │    │
│  └─────────────┴─────────────┴─────────────┴─────────────┴─────────────────────────┘    │
│                                                                                          │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐    │
│  │                           COMPLIANCE & REPORTING                                 │    │
│  ├─────────────┬─────────────┬─────────────┬─────────────┬─────────────────────────┤    │
│  │   Audit     │  Compliance │  Reporting  │    Admin    │      Scheduler          │    │
│  │   Trail     │   Tracking  │   Engine    │   Portal    │   (Tax Updates)         │    │
│  └─────────────┴─────────────┴─────────────┴─────────────┴─────────────────────────┘    │
│                                                                                          │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐    │
│  │                              PLATFORM SERVICES                                   │    │
│  ├─────────────┬─────────────┬─────────────┬─────────────┬─────────────────────────┤    │
│  │     AI      │  Messaging  │   Stripe    │    Email    │      Weather            │    │
│  │   (Gemini)  │    Hub      │   Billing   │   (Resend)  │      Widget             │    │
│  └─────────────┴─────────────┴─────────────┴─────────────┴─────────────────────────┘    │
│                                                                                          │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                    DATA LAYER                                            │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                          │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐    │
│  │                          PostgreSQL (AWS RDS)                                    │    │
│  │  Users │ Employees │ Payroll │ Timesheets │ Benefits │ Taxes │ Audit Logs       │    │
│  └─────────────────────────────────────────────────────────────────────────────────┘    │
│                                                                                          │
└─────────────────────────────────────────────────────────────────────────────────────────┘
```

---

## Project Structure

```
SAURELLIUS CLOUD PAYROLL MANAGEMENT/
│
├── backend/
│   ├── app.py                              # Flask application entry point
│   ├── config.py                           # Environment configuration
│   ├── models.py                           # SQLAlchemy database models
│   │
│   ├── routes/                             # API Route Handlers (35 files)
│   │   │
│   │   │── PAYROLL PROCESSING
│   │   ├── payroll_run_routes.py           # Payroll batch processing
│   │   ├── paystub_routes.py               # Paystub management
│   │   ├── paystub_generator_routes.py     # PDF generation (25 themes)
│   │   ├── ach_routes.py                   # Direct deposit / ACH
│   │   ├── payroll_corrections_routes.py   # Adjustments & corrections
│   │   ├── garnishment_routes.py           # Wage garnishment
│   │   │
│   │   │── TAX COMPLIANCE
│   │   ├── tax_engine_routes.py            # Tax Engine V1 API
│   │   ├── tax_engine_v2_routes.py         # Tax Engine V2 (US + Canada)
│   │   ├── w4_routes.py                    # W-4 form processing
│   │   ├── state_rules_routes.py           # State tax rules
│   │   ├── tax_filing_routes.py            # Tax form filing
│   │   ├── scheduler_routes.py             # Automated tax updates
│   │   │
│   │   │── EMPLOYEE LIFECYCLE
│   │   ├── onboarding_routes.py            # Employee onboarding
│   │   ├── i9_routes.py                    # I-9 verification
│   │   ├── benefits_routes.py              # Benefits administration
│   │   ├── termination_routes.py           # Termination processing
│   │   ├── cobra_routes.py                 # COBRA administration
│   │   │
│   │   │── WORKFORCE MANAGEMENT
│   │   ├── timeclock_routes.py             # Clock in/out, breaks
│   │   ├── workforce_routes.py             # Scheduling
│   │   ├── swipe_routes.py                 # Shift swap
│   │   ├── pto_routes.py                   # PTO tracking
│   │   │
│   │   │── COMPLIANCE & REPORTING
│   │   ├── audit_routes.py                 # Audit trail
│   │   ├── compliance_routes.py            # Document compliance
│   │   ├── reporting_routes.py             # Payroll reports
│   │   ├── admin_routes.py                 # Admin portal
│   │   │
│   │   │── PLATFORM SERVICES
│   │   ├── auth_routes.py                  # Authentication
│   │   ├── dashboard_routes.py             # Dashboard data
│   │   ├── ai_routes.py                    # Saurellius AI
│   │   ├── messaging_routes.py             # Communications
│   │   ├── stripe_routes.py                # Billing
│   │   ├── email_routes.py                 # Email sending
│   │   ├── weather_routes.py               # Weather widget
│   │   ├── contractor_routes.py            # 1099 contractors
│   │   └── accounting_routes.py            # Accounting integrations
│   │
│   └── services/                           # Business Logic Layer (20+ files)
│       ├── tax_engine_service.py           # Tax calculations
│       ├── state_payroll_rules.py          # 50 states + DC rules
│       ├── paystub_generator.py            # PDF rendering
│       ├── gemini_service.py               # AI integration
│       ├── benefits_service.py             # Benefits logic
│       ├── messaging_service.py            # Communications
│       ├── scheduler_service.py            # Background jobs
│       └── ...
│
├── frontend/
│   ├── App.tsx                             # Application entry point
│   │
│   └── src/
│       ├── screens/                        # UI Screens (30+ modules)
│       │   ├── payroll/                    # Payroll processing
│       │   ├── employees/                  # Employee management
│       │   ├── taxforms/                   # W-4, I-9 forms
│       │   ├── timeclock/                  # Time & attendance
│       │   ├── benefits/                   # Benefits enrollment
│       │   ├── audit/                      # Audit trail viewer
│       │   ├── corrections/                # Payroll corrections
│       │   ├── termination/                # Termination processing
│       │   ├── yearend/                    # Year-end processing
│       │   ├── directdeposit/              # Bank accounts
│       │   └── ...
│       │
│       ├── services/                       # API Client Services (34 files)
│       │   ├── api.ts                      # Base HTTP client
│       │   ├── payrollRun.ts               # Payroll processing
│       │   ├── w4.ts                       # W-4 management
│       │   ├── i9.ts                       # I-9 verification
│       │   ├── timeclock.ts                # Time tracking
│       │   ├── audit.ts                    # Audit logs
│       │   ├── ach.ts                      # Direct deposit
│       │   ├── corrections.ts              # Corrections
│       │   ├── termination.ts              # Terminations
│       │   └── ...
│       │
│       ├── components/                     # Reusable UI components
│       ├── hooks/                          # Custom React hooks
│       └── utils/                          # Utility functions
│
├── docs/
│   ├── TAX_ENGINE_API_V2.md                # Tax Engine API reference
│   ├── DEPLOYMENT_GUIDE.md                 # Deployment instructions
│   ├── SOCIAL_AUTH_SETUP.md                # OAuth configuration
│   └── stripe_pricing_guide.md             # Billing setup
│
├── database/
│   └── schema.sql                          # PostgreSQL schema
│
└── infrastructure/
    └── aws-cloudformation.yaml             # AWS deployment
```

---

## Getting Started

### Prerequisites

- Node.js 18+
- Python 3.11+
- PostgreSQL 14+
- Expo CLI

### Backend Setup

```bash
cd backend
python -m venv venv
source venv/bin/activate
pip install -r requirements.txt
flask run --port 5001
```

### Frontend Setup

```bash
cd frontend
npm install
npx expo start
```

### Environment Variables

```env
# Database
DATABASE_URL=postgresql://user:pass@host:5432/saurellius

# API Keys
GEMINI_API_KEY=your_gemini_key
STRIPE_SECRET_KEY=your_stripe_key
RESEND_API_KEY=your_resend_key

# JWT
JWT_SECRET_KEY=your_jwt_secret
```

---

## API Documentation

Full API documentation available at:
- **Tax Engine API**: [docs/TAX_ENGINE_API_V2.md](docs/TAX_ENGINE_API_V2.md)
- **Deployment Guide**: [docs/DEPLOYMENT_GUIDE.md](docs/DEPLOYMENT_GUIDE.md)

---

## License

© 2025 Saurellius Cloud Payroll. All rights reserved.

---

<div align="center">

**Built for Enterprise Payroll**

[Website](https://saurellius.com) • [Documentation](https://docs.saurellius.com) • [API Status](https://status.saurellius.com)

</div>
